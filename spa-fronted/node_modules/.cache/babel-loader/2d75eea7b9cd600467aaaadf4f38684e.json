{"ast":null,"code":"import _defineProperty from\"C:/Users/A S U S/Desktop/spaflormaria/spa-frontend/spa-fronted/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/A S U S/Desktop/spaflormaria/spa-frontend/spa-fronted/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/A S U S/Desktop/spaflormaria/spa-frontend/spa-fronted/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import Input from\"../../components/Input\";import{URLSERVER}from\"../../Helpers/Constants\";import useNavbar from\"../../hooks/useNavbar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useNavbar=useNavbar(),login=_useNavbar.login;var navigate=useNavigate();var _useNavbar2=useNavbar(),isSessionActive=_useNavbar2.isSessionActive;var handleData=function handleData(e){setData(_objectSpread(_objectSpread({},data),{},_defineProperty({},e.target.name,e.target.value)));};var loginFetch=function loginFetch(){var msg=\"\";if(data.email){if(data.password){fetch(\"\".concat(URLSERVER,\"api/users/login\"),{method:\"POST\",body:JSON.stringify(data),headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},mode:\"cors\"}).then(function(res){return res.json();}).then(function(obj){if(obj.status===\"ok\"){if(login(obj)){navigate(\"/\");}else{alert(\"Faltan datos\");}}else{alert(obj.status);}}).catch(function(err){return alert(\"Error -> \".concat(err));});}else{msg=\"Debe ingresar la contrase침a\";alert(msg);}}else{msg=\"Debe ingresar el email\";alert(msg);}};useEffect(function(){// console.log(\"Se ejecuta el use eject y la session es \", isSessionActive());\nif(isSessionActive()){navigate(\"/\");}});return/*#__PURE__*/_jsxs(\"main\",{className:\"w-full flex flex-col items-center mb-8 px-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center text-[56px] mb-8 font-semibold\",children:\"Iniciar Sesi\\xF3n\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"max-w-[448px] w-full border border-black rounded-[33px] p-4 lg:p-8\",children:[/*#__PURE__*/_jsx(Input,{title:\"Email*\",placeholder:\"juan.perez@gmail.com\",type:\"text\",name:\"email\",onChange:handleData,value:data.email}),/*#__PURE__*/_jsx(Input,{title:\"Contrase\\xF1a*\",placeholder:\"************\",type:\"password\",name:\"password\",onChange:handleData,value:data.password}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex justify-end mt-4\",children:/*#__PURE__*/_jsx(\"button\",{className:\"py-2 px-5 bg-green-500 border rounded-full text-white hover:bg-green-400\",onClick:loginFetch,children:\"Ingresar\"})})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Input","URLSERVER","useNavbar","Login","data","setData","login","navigate","isSessionActive","handleData","e","target","name","value","loginFetch","msg","email","password","fetch","method","body","JSON","stringify","headers","Accept","mode","then","res","json","obj","status","alert","catch","err"],"sources":["C:/Users/A S U S/Desktop/spaflormaria/spa-frontend/spa-fronted/src/pages/Login/index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Input from \"../../components/Input\";\r\nimport { URLSERVER } from \"../../Helpers/Constants\";\r\nimport useNavbar from \"../../hooks/useNavbar\";\r\n\r\nexport default function Login() {\r\n  const [data, setData] = useState({});\r\n  const { login } = useNavbar();\r\n  const navigate = useNavigate();\r\n  const { isSessionActive } = useNavbar();\r\n\r\n  const handleData = (e) => {\r\n    setData({\r\n      ...data,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const loginFetch = () => {\r\n    let msg = \"\";\r\n    if (data.email) {\r\n      if (data.password) {\r\n        fetch(`${URLSERVER}api/users/login`, {\r\n          method: \"POST\",\r\n          body: JSON.stringify(data),\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          mode: \"cors\",\r\n        })\r\n          .then((res) => res.json())\r\n          .then((obj) => {\r\n            if (obj.status === \"ok\") {\r\n              if (login(obj)) {\r\n                navigate(\"/\");\r\n              } else {\r\n                alert(\"Faltan datos\");\r\n              }\r\n            } else {\r\n              alert(obj.status);\r\n            }\r\n          })\r\n          .catch((err) => alert(`Error -> ${err}`));\r\n      } else {\r\n        msg = \"Debe ingresar la contrase침a\";\r\n        alert(msg);\r\n      }\r\n    } else {\r\n      msg = \"Debe ingresar el email\";\r\n      alert(msg);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // console.log(\"Se ejecuta el use eject y la session es \", isSessionActive());\r\n    if (isSessionActive()) {\r\n      navigate(\"/\");\r\n    }\r\n  });\r\n\r\n  return (\r\n    <main className=\"w-full flex flex-col items-center mb-8 px-4\">\r\n      <h2 className=\"text-center text-[56px] mb-8 font-semibold\">\r\n        Iniciar Sesi칩n\r\n      </h2>\r\n      <section className=\"max-w-[448px] w-full border border-black rounded-[33px] p-4 lg:p-8\">\r\n        <Input\r\n          title=\"Email*\"\r\n          placeholder=\"juan.perez@gmail.com\"\r\n          type=\"text\"\r\n          name=\"email\"\r\n          onChange={handleData}\r\n          value={data.email}\r\n        />\r\n        <Input\r\n          title=\"Contrase침a*\"\r\n          placeholder=\"************\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          onChange={handleData}\r\n          value={data.password}\r\n        />\r\n        <div className=\"w-full flex justify-end mt-4\">\r\n          <button\r\n            className=\"py-2 px-5 bg-green-500 border rounded-full text-white hover:bg-green-400\"\r\n            onClick={loginFetch}\r\n          >\r\n            Ingresar\r\n          </button>\r\n        </div>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}