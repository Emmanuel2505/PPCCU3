{"ast":null,"code":"import _slicedToArray from\"C:/Users/A S U S/Desktop/spaflormaria/spa-frontend/spa-fronted/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import navbarContext from\"../contexts/NavbarContext\";import{useContext,useState}from\"react\";import{SESSIONSTORAGE}from\"../Helpers/Constants\";var userModel={token:\"\",fullname:\"\",rol:\"\",email:\"\"};function resetStorage(){setSessionStorage(userModel);}function setSessionStorage(model){localStorage.setItem(SESSIONSTORAGE,JSON.stringify(model));}function sessionStorage(){try{if(!localStorage.getItem(SESSIONSTORAGE)){resetStorage();}return JSON.parse(localStorage.getItem(SESSIONSTORAGE));}catch(error){console.log(\"Error-->\",error);}}export var useNavbarModel=function useNavbarModel(){var _useState=useState(\"/\"),_useState2=_slicedToArray(_useState,2),url=_useState2[0],setUrl=_useState2[1];var _useState3=useState(sessionStorage()),_useState4=_slicedToArray(_useState3,2),session=_useState4[0],setSession=_useState4[1];var logout=function logout(){resetStorage();setSession(sessionStorage());};var isSessionActive=function isSessionActive(){var chis=false;if(session.email!==\"\"){chis=true;}return chis;};var isSessionAdmin=function isSessionAdmin(){return isSessionActive()&session.rol===\"admin\";};var getAhutorization=function getAhutorization(){var ahorization=\"Bearer \";ahorization+=session.token;return ahorization;};var login=function login(data){var chis=true;if(data.token){if(data.fullname){if(data.email){if(data.rol){setSessionStorage(data);setSession(sessionStorage());}else{chis=false;}}else{chis=false;}}else{chis=false;}}else{chis=false;}return chis;};return{url:url,session:session,setUrl:setUrl,login:login,logout:logout,isSessionActive:isSessionActive,isSessionAdmin:isSessionAdmin,getAhutorization:getAhutorization};};// eslint-disable-next-line import/no-anonymous-default-export\nexport default(function(){return useContext(navbarContext);});","map":{"version":3,"names":["navbarContext","useContext","useState","SESSIONSTORAGE","userModel","token","fullname","rol","email","resetStorage","setSessionStorage","model","localStorage","setItem","JSON","stringify","sessionStorage","getItem","parse","error","console","log","useNavbarModel","url","setUrl","session","setSession","logout","isSessionActive","chis","isSessionAdmin","getAhutorization","ahorization","login","data"],"sources":["C:/Users/A S U S/Desktop/spaflormaria/spa-frontend/spa-fronted/src/hooks/useNavbar.js"],"sourcesContent":["import navbarContext from \"../contexts/NavbarContext\";\r\n\r\nimport { useContext, useState } from \"react\";\r\nimport { SESSIONSTORAGE } from \"../Helpers/Constants\";\r\nconst userModel = { token: \"\", fullname: \"\", rol: \"\", email: \"\" };\r\n\r\nfunction resetStorage() {\r\n  setSessionStorage(userModel);\r\n}\r\n\r\nfunction setSessionStorage(model) {\r\n  localStorage.setItem(SESSIONSTORAGE, JSON.stringify(model));\r\n}\r\n\r\nfunction sessionStorage() {\r\n  try {\r\n    if (!localStorage.getItem(SESSIONSTORAGE)) {\r\n      resetStorage();\r\n    }\r\n    return JSON.parse(localStorage.getItem(SESSIONSTORAGE));\r\n  } catch (error) {\r\n    console.log(\"Error-->\", error);\r\n  }\r\n}\r\n\r\nexport const useNavbarModel = () => {\r\n  const [url, setUrl] = useState(\"/\");\r\n  const [session, setSession] = useState(sessionStorage());\r\n\r\n  const logout = () => {\r\n    resetStorage();\r\n    setSession(sessionStorage());\r\n  };\r\n\r\n  const isSessionActive = () => {\r\n    let chis = false;\r\n    if (session.email !== \"\") {\r\n      chis = true;\r\n    }\r\n    return chis;\r\n  };\r\n\r\n  const isSessionAdmin = () => {\r\n    return isSessionActive() & (session.rol === \"admin\");\r\n  };\r\n\r\n  const getAhutorization = () => {\r\n    let ahorization = \"Bearer \";\r\n    ahorization += session.token;\r\n    return ahorization;\r\n  };\r\n\r\n  const login = (data) => {\r\n    let chis = true;\r\n    if (data.token) {\r\n      if (data.fullname) {\r\n        if (data.email) {\r\n          if (data.rol) {\r\n            setSessionStorage(data);\r\n            setSession(sessionStorage());\r\n          } else {\r\n            chis = false;\r\n          }\r\n        } else {\r\n          chis = false;\r\n        }\r\n      } else {\r\n        chis = false;\r\n      }\r\n    } else {\r\n      chis = false;\r\n    }\r\n    return chis;\r\n  };\r\n\r\n  return {\r\n    url,\r\n    session,\r\n    setUrl,\r\n    login,\r\n    logout,\r\n    isSessionActive,\r\n    isSessionAdmin,\r\n    getAhutorization,\r\n  };\r\n};\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default () => useContext(navbarContext);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}